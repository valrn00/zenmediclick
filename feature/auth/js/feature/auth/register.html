<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Paciente - ZenMediClick</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .register-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .register-header {
            background: linear-gradient(45deg, #43e97b 0%, #38f9d7 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .register-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .register-content {
            padding: 50px;
        }

        .form-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #43e97b;
            box-shadow: 0 0 10px rgba(67, 233, 123, 0.2);
        }

        .password-container {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #666;
        }

        .password-strength {
            margin-top: 8px;
            height: 4px;
            background: #e1e5e9;
            border-radius: 2px;
            overflow: hidden;
        }

        .password-strength-bar {
            height: 100%;
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .strength-weak { background: #dc3545; width: 33%; }
        .strength-medium { background: #ffc107; width: 66%; }
        .strength-strong { background: #28a745; width: 100%; }

        .checkbox-group {
            margin: 20px 0;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin-top: 3px;
        }

        .checkbox-item label {
            margin-bottom: 0;
            font-weight: normal;
            font-size: 14px;
            cursor: pointer;
        }

        .required-checkbox {
            border-left: 4px solid #dc3545;
        }

        .optional-checkbox {
            border-left: 4px solid #28a745;
        }

        .btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 0;
        }

        .btn-primary {
            background: linear-gradient(45deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(67, 233, 123, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #333;
            border: 2px solid #e1e5e9;
        }

        .privacy-notice {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
        }

        .privacy-notice h4 {
            color: #1976d2;
            margin-bottom: 15px;
        }

        .privacy-notice ul {
            list-style: none;
            padding-left: 0;
        }

        .privacy-notice li {
            margin-bottom: 8px;
            padding-left: 25px;
            position: relative;
        }

        .privacy-notice li:before {
            content: "üîí";
            position: absolute;
            left: 0;
        }

        .success-message {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            display: none;
        }

        .error-message {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            display: none;
        }

        .verification-step {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            margin: 25px 0;
            display: none;
        }

        .verification-code {
            font-size: 24px;
            font-weight: bold;
            letter-spacing: 3px;
            color: #333;
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px solid #dee2e6;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .register-content {
                padding: 30px;
            }

            .register-header {
                padding: 30px 20px;
            }

            .register-header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="register-container">
        <div class="register-header">
            <h1>üìù Registro de Paciente</h1>
            <p>Crea tu cuenta para acceder a ZenMediClick</p>
        </div>

        <div class="register-content">
            <!-- Mensajes -->
            <div id="successMessage" class="success-message"></div>
            <div id="errorMessage" class="error-message"></div>
            <div id="verificationStep" class="verification-step">
                <h3>üìß Verificaci√≥n de Email</h3>
                <p>Se ha enviado un c√≥digo de verificaci√≥n a tu correo electr√≥nico</p>
                <div class="verification-code" id="verificationCode">------</div>
                <input type="text" id="codeInput" placeholder="Ingresa el c√≥digo" maxlength="6" style="width: 200px; text-align: center; margin: 15px 0;">
                <br>
                <button class="btn btn-primary" onclick="verifyEmail()" style="width: auto; padding: 12px 30px;">
                    ‚úÖ Verificar Email
                </button>
            </div>

            <form id="registerForm">
                <!-- Informaci√≥n Personal -->
                <div class="form-section">
                    <div class="section-title">
                        üë§ Informaci√≥n Personal
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Nombre Completo *</label>
                            <input type="text" id="fullName" required placeholder="Juan P√©rez Garc√≠a">
                        </div>
                        <div class="form-group">
                            <label>N√∫mero de Identificaci√≥n *</label>
                            <input type="text" id="idNumber" required placeholder="12345678">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Fecha de Nacimiento *</label>
                            <input type="date" id="birthDate" required>
                        </div>
                        <div class="form-group">
                            <label>G√©nero *</label>
                            <select id="gender" required>
                                <option value="">Seleccionar...</option>
                                <option value="masculino">Masculino</option>
                                <option value="femenino">Femenino</option>
                                <option value="otro">Otro</option>
                                <option value="no-especificar">Prefiero no especificar</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Direcci√≥n *</label>
                        <textarea id="address" required placeholder="Calle 123 #45-67, Barrio, Ciudad" rows="3"></textarea>
                    </div>
                </div>

                <!-- Informaci√≥n de Contacto -->
                <div class="form-section">
                    <div class="section-title">
                        üìû Informaci√≥n de Contacto
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" id="email" required placeholder="juan@ejemplo.com">
                        </div>
                        <div class="form-group">
                            <label>Confirmar Email *</label>
                            <input type="email" id="confirmEmail" required placeholder="juan@ejemplo.com">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Tel√©fono *</label>
                            <input type="tel" id="phone" required placeholder="+57 300 123 4567">
                        </div>
                        <div class="form-group">
                            <label>Tel√©fono de Emergencia</label>
                            <input type="tel" id="emergencyPhone" placeholder="+57 301 987 6543">
                        </div>
                    </div>
                </div>

                <!-- Informaci√≥n M√©dica B√°sica -->
                <div class="form-section">
                    <div class="section-title">
                        üè• Informaci√≥n M√©dica B√°sica
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Tipo de Sangre</label>
                            <select id="bloodType">
                                <option value="">Seleccionar...</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>EPS/Aseguradora</label>
                            <input type="text" id="insurance" placeholder="Nombre de tu EPS">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Alergias Conocidas</label>
                        <textarea id="allergies" placeholder="Describe cualquier alergia conocida (medicamentos, alimentos, etc.)" rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Contacto de Emergencia</label>
                        <input type="text" id="emergencyContact" placeholder="Nombre y relaci√≥n del contacto de emergencia">
                    </div>
                </div>

                <!-- Seguridad de la Cuenta -->
                <div class="form-section">
                    <div class="section-title">
                        üîí Seguridad de la Cuenta
                    </div>

                    <div class="form-group">
                        <label>Contrase√±a Segura *</label>
                        <div class="password-container">
                            <input type="password" id="password" required placeholder="M√≠nimo 8 caracteres">
                            <span class="password-toggle" onclick="togglePassword('password')">üëÅÔ∏è</span>
                        </div>
                        <div class="password-strength">
                            <div id="passwordStrengthBar" class="password-strength-bar"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Confirmar Contrase√±a *</label>
                        <div class="password-container">
                            <input type="password" id="confirmPassword" required placeholder="Confirma tu contrase√±a">
                            <span class="password-toggle" onclick="togglePassword('confirmPassword')">üëÅÔ∏è</span>
                        </div>
                    </div>
                </div>

                <!-- Aviso de Privacidad -->
                <div class="privacy-notice">
                    <h4>üõ°Ô∏è Protecci√≥n de Datos Personales</h4>
                    <p>En ZenMediClick protegemos tu informaci√≥n personal con los m√°s altos est√°ndares de seguridad:</p>
                    <ul>
                        <li>Cifrado de extremo a extremo para toda tu informaci√≥n</li>
                        <li>Cumplimiento con normativas HIPAA y GDPR</li>
                        <li>Acceso limitado solo al personal m√©dico autorizado</li>
                        <li>Logs de auditor√≠a de todos los accesos a tu informaci√≥n</li>
                        <li>Derecho a la portabilidad y eliminaci√≥n de tus datos</li>
                    </ul>
                </div>

                <!-- Consentimientos -->
                <div class="checkbox-group">
                    <div class="checkbox-item required-checkbox">
                        <input type="checkbox" id="termsAccept" required>
                        <label for="termsAccept">
                            <strong>Acepto los t√©rminos y condiciones de uso *</strong><br>
                            <small>He le√≠do y acepto los <a href="#" onclick="showTerms()">t√©rminos y condiciones</a> de ZenMediClick</small>
                        </label>
                    </div>

                    <div class="checkbox-item required-checkbox">
                        <input type="checkbox" id="privacyAccept" required>
                        <label for="privacyAccept">
                            <strong>Acepto la pol√≠tica de privacidad *</strong><br>
                            <small>Autorizo el tratamiento de mis datos seg√∫n la <a href="#" onclick="showPrivacy()">pol√≠tica de privacidad</a></small>
                        </label>
                    </div>

                    <div class="checkbox-item required-checkbox">
                        <input type="checkbox" id="medicalDataAccept" required>
                        <label for="medicalDataAccept">
                            <strong>Autorizo el procesamiento de mis datos m√©dicos *</strong><br>
                            <small>Permito que ZenMediClick procese mi informaci√≥n m√©dica para brindar atenci√≥n sanitaria</small>
                        </label>
                    </div>

                    <div class="checkbox-item optional-checkbox">
                        <input type="checkbox" id="marketingAccept">
                        <label for="marketingAccept">
                            <strong>Acepto recibir comunicaciones promocionales (opcional)</strong><br>
                            <small>Deseo recibir informaci√≥n sobre nuevos servicios y promociones de ZenMediClick</small>
                        </label>
                    </div>

                    <div class="checkbox-item optional-checkbox">
                        <input type="checkbox" id="twoFactorAccept">
                        <label for="twoFactorAccept">
                            <strong>Activar autenticaci√≥n de doble factor (recomendado)</strong><br>
                            <small>Agregue una capa adicional de seguridad a tu cuenta</small>
                        </label>
                    </div>
                </div>

                <!-- Botones -->
                <button type="submit" class="btn btn-primary" id="registerBtn">
                    üéâ Crear Mi Cuenta Segura
                </button>

                <button type="button" class="btn btn-secondary" onclick="goToLogin()">
                    ‚Üê Volver al Inicio de Sesi√≥n
                </button>
            </form>
        </div>
    </div>

    <script>
        // Variables globales
        let verificationCode = '';

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar fecha m√°xima (18 a√±os)
            const today = new Date();
            const maxDate = new Date(today.getFullYear() - 18, today.getMonth(), today.getDate());
            document.getElementById('birthDate').max = maxDate.toISOString().split('T')[0];

            // Validaciones en tiempo real
            document.getElementById('password').addEventListener('input', validatePassword);
            document.getElementById('confirmPassword').addEventListener('input', validatePassword);
            document.getElementById('email').addEventListener('input', validateEmails);
            document.getElementById('confirmEmail').addEventListener('input', validateEmails);
            
            // Formulario
            document.getElementById('registerForm').addEventListener('submit', handleRegistration);
        });

        // Toggle password visibility
        function togglePassword(fieldId) {
            const field = document.getElementById(fieldId);
            const type = field.getAttribute('type') === 'password' ? 'text' : 'password';
            field.setAttribute('type', type);
            
            const toggle = field.nextElementSibling;
            toggle.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
        }

        // Validar contrase√±a
        function validatePassword() {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const strengthBar = document.getElementById('passwordStrengthBar');

            // Calcular fuerza de contrase√±a
            let strength = 0;
            if (password.length >= 8) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/\d/.test(password)) strength++;
            if (/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) strength++;

            // Actualizar barra visual
            strengthBar.className = 'password-strength-bar';
            if (strength < 3) {
                strengthBar.classList.add('strength-weak');
            } else if (strength < 5) {
                strengthBar.classList.add('strength-medium');
            } else {
                strengthBar.classList.add('strength-strong');
            }

            // Validar coincidencia
            const confirmField = document.getElementById('confirmPassword');
            if (password && confirmPassword) {
                if (password === confirmPassword) {
                    confirmField.style.borderColor = '#28a745';
                } else {
                    confirmField.style.borderColor = '#dc3545';
                }
            }

            return strength >= 3 && password === confirmPassword;
        }

        // Validar emails
        function validateEmails() {
            const email = document.getElementById('email').value;
            const confirmEmail = document.getElementById('confirmEmail').value;

            if (email && confirmEmail) {
                const emailField = document.getElementById('confirmEmail');
                if (email === confirmEmail) {
                    emailField.style.borderColor = '#28a745';
                } else {
                    emailField.style.borderColor = '#dc3545';
                }
            }
        }

        // Manejar registro
        function handleRegistration(event) {
            event.preventDefault();

            // Validaciones
            if (!validatePassword()) {
                showMessage('La contrase√±a no cumple los requisitos o no coincide', 'error');
                return;
            }

            const email = document.getElementById('email').value;
            const confirmEmail = document.getElementById('confirmEmail').value;

            if (email !== confirmEmail) {
                showMessage('Los emails no coinciden', 'error');
                return;
            }

            // Verificar consentimientos obligatorios
            const requiredConsents = ['termsAccept', 'privacyAccept', 'medicalDataAccept'];
            for (let consent of requiredConsents) {
                if (!document.getElementById(consent).checked) {
                    showMessage('Debes aceptar todos los consentimientos obligatorios', 'error');
                    return;
                }
            }

            // Simular proceso de registro
            showMessage('Procesando registro...', 'success');
            
            setTimeout(() => {
                // Generar c√≥digo de verificaci√≥n
                verificationCode = Math.random().toString().substr(2, 6);
                document.getElementById('verificationCode').textContent = verificationCode;
                
                // Mostrar paso de verificaci√≥n
                document.getElementById('verificationStep').style.display = 'block';
                document.getElementById('registerForm').style.display = 'none';
                
                showMessage('‚úÖ Registro exitoso! Verifica tu email para activar tu cuenta', 'success');
            }, 2000);
        }

        // Verificar email
        function verifyEmail() {
            const inputCode = document.getElementById('codeInput').value;
            
            if (inputCode === verificationCode) {
                showMessage('üéâ ¬°Email verificado! Tu cuenta ha sido activada exitosamente', 'success');
                
                setTimeout(() => {
                    // Redirigir al login
                    goToLogin();
                }, 3000);
            } else {
                showMessage('C√≥digo incorrecto. Intenta nuevamente', 'error');
            }
        }

        // Mostrar mensaje
        function showMessage(message, type) {
            const successDiv = document.getElementById('successMessage');
            const errorDiv = document.getElementById('errorMessage');

            // Limpiar mensajes anteriores
            successDiv.style.display = 'none';
            errorDiv.style.display = 'none';

            if (type === 'success') {
                successDiv.textContent = message;
                successDiv.style.display = 'block';
            } else {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
            }

            // Auto-hide despu√©s de 5 segundos
            setTimeout(() => {
                successDiv.style.display = 'none';
                errorDiv.style.display = 'none';
            }, 5000);
        }

        // Navegaci√≥n
        function goToLogin() {
            // En producci√≥n redirigir√≠a a index.html
            window.location.href = 'index.html';
        }

        function showTerms() {
            alert('üìã T√©rminos y Condiciones\nEn producci√≥n se abrir√≠a un modal o p√°gina con los t√©rminos completos');
        }

        function showPrivacy() {
            alert('üîí Pol√≠tica de Privacidad\nEn producci√≥n se abrir√≠a un modal o p√°gina con la pol√≠tica completa');
        }
    </script>
</body>
</html>
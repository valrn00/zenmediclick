<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial de Citas - ZenMediClick</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Estilos básicos - reemplazar por tu CSS completo */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .page-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        .back-button {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
            padding: 10px 20px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        .back-button:hover {
            color: #764ba2;
            background: rgba(102, 126, 234, 0.2);
        }
        .table-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        table th, table td {
            text-align: left;
            padding: 12px;
            border-bottom: 1px solid #eee;
        }
        table th {
            background: #f8f9fa;
            font-weight: bold;
            color: #555;
        }
        table tr:hover {
            background: #f8f9fa;
        }
        .estado-confirmada { color: #28a745; font-weight: bold; }
        .estado-completada { color: #6c757d; font-weight: bold; }
        .estado-cancelada { color: #dc3545; font-weight: bold; }
        .estado-pendiente { color: #ffc107; font-weight: bold; }
        .empty-message {
            text-align: center;
            padding: 40px;
            color: #666;
            font-style: italic;
        }
        .filter-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        .filter-section select, .filter-section input {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        .btn-filter {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn-filter:hover {
            background: #5a6fd8;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header con botón de regreso -->
        <div class="page-header">
            <a href="index.html" class="back-button">← Regresar</a>
            <h1>Historial de Citas</h1>
        </div>

        <!-- Filtros -->
        <div class="filter-section">
            <label>Filtrar por:</label>
            <select id="filtroEspecialidad">
                <option value="">Todas las especialidades</option>
                <option value="cardiologia">Cardiología</option>
                <option value="dermatologia">Dermatología</option>
                <option value="medicina_general">Medicina General</option>
                <option value="pediatria">Pediatría</option>
            </select>
            <select id="filtroEstado">
                <option value="">Todos los estados</option>
                <option value="confirmada">Confirmada</option>
                <option value="completada">Completada</option>
                <option value="cancelada">Cancelada</option>
                <option value="pendiente">Pendiente</option>
            </select>
            <input type="date" id="filtroFecha" placeholder="Fecha específica">
            <button class="btn-filter" onclick="aplicarFiltros()">Filtrar</button>
            <button class="btn-filter" onclick="limpiarFiltros()">Limpiar</button>
        </div>

        <!-- Tabla de historial -->
        <div class="table-container">
            <table id="tablaCitas">
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Hora</th>
                        <th>Especialidad</th>
                        <th>Doctor</th>
                        <th>Estado</th>
                        <th>Motivo</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="cuerpoTabla">
                    <!-- Las citas se cargarán aquí dinámicamente -->
                </tbody>
            </table>
            <div id="mensajeVacio" class="empty-message" style="display: none;">
                No hay citas registradas en tu historial.
            </div>
        </div>
    </div>

    <script>
        // Datos de ejemplo - en una aplicación real vendrían del servidor
        const citasHistorial = [
            {
                fecha: '2024-03-15',
                hora: '10:00',
                especialidad: 'Cardiología',
                doctor: 'Dr. García López',
                estado: 'completada',
                motivo: 'Chequeo rutinario'
            },
            {
                fecha: '2024-03-20',
                hora: '14:30',
                especialidad: 'Dermatología',
                doctor: 'Dra. Martínez Silva',
                estado: 'confirmada',
                motivo: 'Revisión de lunares'
            },
            {
                fecha: '2024-02-28',
                hora: '09:15',
                especialidad: 'Medicina General',
                doctor: 'Dr. Rodríguez Peña',
                estado: 'completada',
                motivo: 'Dolor de cabeza recurrente'
            },
            {
                fecha: '2024-02-10',
                hora: '16:00',
                especialidad: 'Pediatría',
                doctor: 'Dra. López Hernández',
                estado: 'cancelada',
                motivo: 'Vacunación'
            }
        ];

        let citasFiltradas = [...citasHistorial];

        function cargarCitas(citas = citasFiltradas) {
            const tbody = document.getElementById('cuerpoTabla');
            const mensajeVacio = document.getElementById('mensajeVacio');
            
            if (citas.length === 0) {
                tbody.innerHTML = '';
                mensajeVacio.style.display = 'block';
                return;
            }

            mensajeVacio.style.display = 'none';
            
            tbody.innerHTML = citas.map(cita => `
                <tr>
                    <td>${formatearFecha(cita.fecha)}</td>
                    <td>${cita.hora}</td>
                    <td>${cita.especialidad}</td>
                    <td>${cita.doctor}</td>
                    <td><span class="estado-${cita.estado}">${capitalizar(cita.estado)}</span></td>
                    <td>${cita.motivo}</td>
                    <td>
                        <button onclick="verDetalle('${cita.fecha}')" 
                                style="background: #17a2b8; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px;">
                            Ver
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function formatearFecha(fecha) {
            const date = new Date(fecha + 'T00:00:00');
            return date.toLocaleDateString('es-ES', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function capitalizar(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function aplicarFiltros() {
            const filtroEspecialidad = document.getElementById('filtroEspecialidad').value;
            const filtroEstado = document.getElementById('filtroEstado').value;
            const filtroFecha = document.getElementById('filtroFecha').value;

            citasFiltradas = citasHistorial.filter(cita => {
                let cumpleFiltro = true;
                
                if (filtroEspecialidad && !cita.especialidad.toLowerCase().includes(filtroEspecialidad)) {
                    cumpleFiltro = false;
                }
                
                if (filtroEstado && cita.estado !== filtroEstado) {
                    cumpleFiltro = false;
                }
                
                if (filtroFecha && cita.fecha !== filtroFecha) {
                    cumpleFiltro = false;
                }
                
                return cumpleFiltro;
            });

            cargarCitas(citasFiltradas);
        }

        function limpiarFiltros() {
            document.getElementById('filtroEspecialidad').value = '';
            document.getElementById('filtroEstado').value = '';
            document.getElementById('filtroFecha').value = '';
            citasFiltradas = [...citasHistorial];
            cargarCitas();
        }

        function verDetalle(fecha) {
            const cita = citasHistorial.find(c => c.fecha === fecha);
            alert(`Detalle de la cita:
            
Fecha: ${formatearFecha(cita.fecha)}
Hora: ${cita.hora}
Especialidad: ${cita.especialidad}
Doctor: ${cita.doctor}
Estado: ${capitalizar(cita.estado)}
Motivo: ${cita.motivo}`);
        }

        // Cargar citas al iniciar la página
        document.addEventListener('DOMContentLoaded', function() {
            cargarCitas();
        });
    </script>
</body>
</html>